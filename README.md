# BazaQuestion - Система вопросов для технических собеседований

Веб-приложение для подготовки к техническим собеседованиям по Java, Spring и другим технологиям.

## Функциональность

- **Аутентификация и авторизация**: Регистрация, вход, роли пользователей (USER/ADMIN)
- **База вопросов**: Темы, подтемы и вопросы с подробными ответами и примерами кода
- **Поиск**: Глобальный поиск по темам, подтемам и вопросам
- **Админ-панель**: Управление контентом (только для администраторов)
- **REST API**: Полный набор API для интеграции с фронтендом
- **Swagger UI**: Документация API доступна по адресу `/swagger-ui/index.html`

## Технологии

### Backend
- **Spring Boot 3.5.4** - основной фреймворк
- **Spring Security** - аутентификация и авторизация
- **Spring Data JPA** - работа с базой данных
- **PostgreSQL** - база данных
- **Liquibase** - миграции базы данных
- **Lombok** - уменьшение boilerplate кода
- **Swagger/OpenAPI** - документация API

### Frontend
- **Next.js 14** - React фреймворк
- **React 18** - UI библиотека
- **TypeScript** - типизация
- **Tailwind CSS** - стилизация
- **Sonner** - уведомления

## Установка и запуск

### 1. Запуск базы данных (Docker)

```bash
docker-compose up -d
```

### 2. Запуск Backend

```bash
# В корневой папке проекта
./mvnw spring-boot:run
```

Backend будет доступен по адресу: http://localhost:8080

**Swagger UI**: http://localhost:8080/swagger-ui/index.html

### 3. Запуск Frontend

```bash
# В папке FronEnd
cd FronEnd
npm install
npm run dev
```

Frontend будет доступен по адресу: http://localhost:3000

## API Endpoints

Все endpoints возвращают стандартизированный JSON ответ:
```json
{
  "success": true,
  "message": "Операция выполнена успешно",
  "data": { ... }
}
```

### Аутентификация
- `POST /api/auth/register` - регистрация пользователя
- `POST /api/auth/login` - вход в систему
- `POST /api/auth/logout` - выход из системы
- `GET /api/auth/check-auth` - проверка аутентификации
- `GET /api/auth/me` - получение текущего пользователя

### Вопросы (публичные)
- `GET /api/questions/topics` - получение всех тем
- `GET /api/questions/topics/{id}` - получение темы по ID
- `GET /api/questions/topics/{id}/subtopics` - получение подтем темы
- `GET /api/questions/subtopics/{id}/questions` - получение вопросов подтемы
- `GET /api/questions/search?q={query}` - поиск вопросов

### Админ-панель (требует роль ADMIN)
- `POST /api/questions/topics` - создание темы
- `POST /api/questions/subtopics` - создание подтемы
- `POST /api/questions` - создание вопроса
- `PUT /api/questions/{id}` - обновление вопроса
- `DELETE /api/questions/{id}` - удаление вопроса

### Обработка ошибок
Все ошибки возвращают соответствующие HTTP статусы:
- `400 Bad Request` - ошибки валидации
- `401 Unauthorized` - ошибки аутентификации
- `403 Forbidden` - ошибки авторизации
- `500 Internal Server Error` - внутренние ошибки сервера

## Структура данных

### Пользователи
- `id` - уникальный идентификатор
- `username` - логин пользователя
- `email` - email адрес
- `password` - хешированный пароль
- `role` - роль (USER/ADMIN)
- `enabled` - активен ли пользователь

### Темы
- `id` - уникальный идентификатор
- `name` - название темы
- `icon` - эмодзи иконка

### Подтемы
- `id` - уникальный идентификатор
- `name` - название подтемы
- `topic` - связь с темой

### Вопросы
- `id` - уникальный идентификатор
- `question` - текст вопроса
- `quickAnswer` - краткий ответ
- `detailedAnswer` - подробный ответ
- `codeExample` - пример кода
- `subtopic` - связь с подтемой
- `createdBy` - создатель вопроса

## Начальные данные

При первом запуске автоматически создаются:
- Администратор: `admin` / `admin123`
- Темы: Java Core, Spring Core, Kafka, PostgreSQL, gRPC
- Подтемы и вопросы для каждой темы

## Интеграция Frontend-Backend

Фронтенд полностью интегрирован с бэкендом через REST API:

1. **Аутентификация**: Все запросы используют сессии Spring Security
2. **CORS**: Настроен для работы с фронтендом на localhost:3000
3. **Обработка ошибок**: Унифицированная обработка ошибок с уведомлениями
4. **Типизация**: TypeScript интерфейсы соответствуют DTO бэкенда

## Разработка

### Добавление новых тем
1. Войдите как администратор
2. Откройте админ-панель
3. Создайте новую тему с иконкой
4. Добавьте подтемы и вопросы

### Расширение API
1. Создайте новые контроллеры в `src/main/java/com/example/bazaquestion/controller/`
2. Добавьте методы в сервисы
3. Обновите Swagger документацию
4. Добавьте соответствующие методы в `FronEnd/lib/api.ts`

## Безопасность

- Пароли хешируются с помощью BCrypt
- Сессии управляются Spring Security
- CORS настроен только для разрешенных доменов
- Админ-функции доступны только пользователям с ролью ADMIN 